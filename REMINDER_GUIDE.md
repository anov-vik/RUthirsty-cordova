# 定时提醒功能说明

## 🎯 功能概述

应用会在每天的固定时间点自动提醒你喝水，帮助养成良好的饮水习惯。

## ⏰ 提醒时间点

| 时间 | 说明 |
|------|------|
| 06:30 | 早晨起床后，开启新的一天 |
| 09:30 | 上午工作时段 |
| 11:30 | 午餐前补充水分 |
| 13:30 | 下午开始，保持活力 |
| 17:30 | 傍晚时分 |
| 19:30 | 晚餐后适量饮水 |
| 21:30 | 睡前补水 |

**每天共 7 次提醒**，帮助你达到 1400ml+ 的饮水目标！

## 📱 使用方法

### 1. 开启提醒

- 在应用主界面找到"⏰ 定时提醒"设置项
- 打开右侧的开关按钮
- 首次开启会请求通知权限，请点击"允许"

### 2. 关闭提醒

- 将开关按钮关闭即可
- 已关闭的提醒不会再发送通知

### 3. 通知权限

**浏览器版本：**
- 首次开启提醒时，浏览器会询问是否允许通知
- 必须点击"允许"才能收到提醒
- 如果误点了"阻止"，需要在浏览器设置中重新允许

**Android APP：**
- 首次安装时会请求通知权限
- 也可以在系统设置 → 应用 → 喝水打卡 → 通知 中管理

## 🔔 提醒方式

当到达提醒时间时，你会收到：

1. **浏览器通知**（桌面版）
   - 系统通知栏显示提醒
   - 带有应用图标和文字
   - 点击通知可直接打开应用

2. **应用内提醒**
   - 屏幕顶部弹出 Toast 提示
   - 自动消失，不打扰操作

3. **震动反馈**（移动设备）
   - 短促的震动提醒
   - 即使手机静音也能感知

## 💡 智能提醒机制

- ✅ 每个时间点每天只提醒一次
- ✅ 已发送的提醒会被记录，避免重复
- ✅ 每天零点自动重置提醒记录
- ✅ 应用需要保持打开状态才能收到提醒
- ✅ 可以随时开启/关闭提醒功能

## 🧪 测试提醒功能

### 方法1：等待实际时间点
- 在提醒时间点到来时，应用会自动发送通知
- 例如：在 9:30 会收到上午的提醒

### 方法2：使用测试页面
1. 在浏览器中打开 `test-reminder.html`
2. 点击"请求通知权限"并允许
3. 点击任意时间点按钮，立即体验提醒效果

访问测试页面：
```
http://localhost:8080/test-reminder.html
```

### 方法3：手动触发（开发者）
在浏览器控制台执行：
```javascript
app.sendWaterReminder('09:30');
```

## ⚠️ 注意事项

### 浏览器版本
- 需要应用保持打开（至少在后台标签页）
- 关闭浏览器标签页后无法收到提醒
- 建议将应用固定为标签页

### Android APP 版本
- 应用在后台也能发送提醒
- 系统可能会限制后台应用，建议：
  - 将应用加入电池优化白名单
  - 允许后台活动
  - 允许自启动（部分手机）

### iOS 版本
- 需要使用 Cordova 本地通知插件
- 后台提醒需要额外配置
- 建议保持应用在前台

## 🔧 故障排查

**问题：没有收到通知**
1. 检查提醒开关是否打开
2. 检查通知权限是否允许
3. 检查系统时间是否正确
4. 确认应用是否在运行中

**问题：通知请求失败**
1. 浏览器：检查是否已阻止通知 → 在设置中重新允许
2. Android：检查应用权限设置
3. 尝试清除浏览器缓存重新打开

**问题：重复收到通知**
1. 可能有多个标签页打开应用
2. 清除本地存储数据并重启应用

## 📊 统计信息

提醒设置会保存在本地存储中：
- `reminderEnabled`: 提醒开关状态
- `sentRemindersToday`: 今日已发送的提醒记录

## 🎨 界面说明

设置项包含：
- **⏰ 图标** - 提醒功能标识
- **定时提醒** - 功能名称
- **时间说明** - 显示所有提醒时间点
- **开关按钮** - 紫色（开启）/ 灰色（关闭）

## 🚀 未来计划

- [ ] 自定义提醒时间
- [ ] 提醒铃声选择
- [ ] 提醒历史记录
- [ ] 连续打卡成就
- [ ] 每周饮水报告

---

**祝你每天都能按时喝够水，保持健康！** 💧
